---
import Layout from "../layouts/Layout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
const sortedProjects = projects.sort(
    (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<Layout title="Chef Pâtissier - Portfolio">
    <!-- Hero Section -->
    <section class="text-center py-16 md:py-24 space-y-6">
        <h1
            class="text-5xl md:text-7xl font-bold font-serif text-stone-900 tracking-tight leading-tight"
        >
            L'Art de la<br />
            <span class="text-amber-700 italic">Pâtisserie</span>
        </h1>
        <p
            class="text-xl md:text-2xl text-stone-500 max-w-2xl mx-auto font-light"
        >
            Découvrez une collection de douceurs, d'entremets et de créations
            uniques.
        </p>
    </section>

    <!-- Projects Grid -->
    <section id="projects" class="py-12">
        {/* Simple Masonry-like grid using CSS Grid columns */}
        <div
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12"
        >
            {
                sortedProjects
                    .slice(0, 3)
                    .map((project) => <ProjectCard project={project} />)
            }
        </div>

        {
            projects.length === 0 ? (
                <div class="text-center p-12 border-2 border-dashed border-stone-200 rounded-xl">
                    <p class="text-stone-400">Aucun projet pour le moment.</p>
                </div>
            ) : (
                <div class="text-center">
                    <a
                        href="/projects"
                        class="inline-block border border-stone-900 text-stone-900 px-8 py-3 rounded-full font-medium hover:bg-stone-900 hover:text-white transition-all duration-300 uppercase text-sm tracking-wider"
                    >
                        Voir toutes les créations
                    </a>
                </div>
            )
        }
    </section>
</Layout>
